Spark The Definitive Guide 

18.5.1 스파크 애플리케이션이 시작되지 않는 경우
징후와 증상
* 스파크 잡이 시작되지 않음
* 스파크 UI가 드라이버 노드를 제외한 클러스터의 노드 정보를 표시하지 않음
* 스파크 UI가 잘못된 정보를 표시함

잠재적 대응법
스파크 클러스터에 잘못된 설정이 되어있다면 드라이버와 익스큐터 간에 통신이 제대로 이뤄지지 않을 수 있음
대부분 클러스터 영역, 머신, 설정과 관련된 문제.
사용자 애플리케이션에서 익스큐터 자원을 클러스터 매니저의 유휴 자원 이상으로 요청하는 경우
(드라이버는 익스큐터가 실행될 때까지 무한정 대기)

* 설정한 포트로 클러스터 머신간 통신하는지 확인.
* 스파크 자원/ 클러스터 매니저 설정 확인
클러스터 매니저가 제공할 수 있는 메모리 자원 이상으로 익스큐터의 메모리 자원을 요청하는 경우 자주 발생.
클러스터 매니저의 UI로 유휴 자원 확인 후 할당할 메모리 설정


18.5.9 익스큐터 OutOfMemoryError 또는 응답 없음

징후와 증상
* 익스큐터 로그에 OutOfMemoryError또는 가비지 컬렉션과 관련된 메시지가 출력
* 익스큐터가 비정상적으로 종료되거나 응답하지 않음
* 특정 노드의 느린 태스크가 복구되지 않음

잠재적 대응법
* 익스큐터의 가용 메모리와 익스큐터 수를 증가
* (PySpark) 파이썬 설정을 변경해 워커 크기를 증가
* 익스큐터 로그에 가비지 컬렉션 오류 메시지가 발생했는지 확인.
실행 중인 태스크의 일부가 너무 많은 객체를 생성하고 있어서 GC 발생할 수 있음 (특히 udf사용시)
데이터 파티션을 재분배하면 병렬성을 높일 수 있음 & 태스크별로 처리해야 하는 레코드 양을 줄일 수 있음
모든 익스큐터에 동일한 양의 작업이 할당되었는지 확인
* null값을 정확하게 제어하기(" " 또는 "EMPTY" 같은 값을 기본값으로 사용하는 것은 아닌지 확인)
* RDD와 Dataset은 객체를 생성. 가급적 udf 줄이고 스파크의 구조적 API를 사용
* 자바의 jmap을 통해 익스큐터 힙 메모리의 히스토그램을 볼 수 있음. 가장 많은 메모리를 사용하는 클래스 확인
* 키-값 저장소와 같이 다른 워크로드를 처리하는 노드에 익스큐터가 위치한다면 스파크 잡을 다른 작업과 분리해야 함.